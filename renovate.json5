{
    $schema: 'https://docs.renovatebot.com/renovate-schema.json',
    extends: [
        'config:recommended',
        'customManagers:helmChartYamlAppVersions',
        'helpers:pinGitHubActionDigests',
    ],

    bumpVersions: [
        {
            fileMatch: "Chart.ya?ml",
            bumpType: "{{#if isPatch }}patch{{ else }}minor{{ /if }}",
            matchStrings: [
                'version:\\s(?<version>[^\\s]+)'
            ]
        }
    ],

    customManagers: [
        {
          customType: "regex",
          fileMatch: ['\\.github\/workflows\/release\\.ya?ml'],
          matchStrings: [
            // this is mostly a copy from https://docs.renovatebot.com/presets-customManagers/#custommanagersgithubactionsversions
            // and only changes the expected version prefix
            "# renovate: datasource=(?<datasource>[a-z-.]+?) depName=(?<depName>[^\\s]+?)(?: (?:lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?\\s+version\\s*:\\s*[\"']?(?<currentValue>.+?)[\"']?\\s"
          ]
        }
      ]
}